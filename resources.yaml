- name: site
  groups:
    - title: Site options
      entries:
        - name: name
          default:
          type: string
          description: |
            A name of your choice for this Skupper site.
        - name: annotations
          default:
          type: strings
          description: |
            Annotations to add to Skupper pods.
        - name: labels
          default:
          type: strings
          description: |
            Labels to add to skupper pods
        - name: create-network-policy
          default: n
          type: boolean
          description: |
            Create network policy to restrict access to Skupper services
            exposed through this site to the pods currently in the
            namespace.
        - name: enable-rest-api
          default:
          type: boolean
          description: |
            Enable REST API
    - title: Ingress options
      entries:
        - name: ingress
          default: route if available, else loadbalancer
          type: string
          choices: [route, loadbalancer, nodeport, nginx-ingress-v1, contour-http-proxy, ingress, none]
          description: |
            Setup Skupper ingress to one of
        - name: ingress-host
          default: null
          type: string
          description: |
            The hostname or alias by which the ingress route or proxy can
            be reached.
        - name: ingress-annotations
          default:
          type: strings
          description: |
            Annotations to add to skupper ingress
    - title: Console options
      entries:
        - name: enable-console
          default: n
          type: boolean
          description: |
            Enable skupper console must be used in conjunction with
            '--enable-flow-collector' flag
        - name: console-auth
          default: internal
          type: string
          choices: [internal, openshift, unsecured]
          description: |
            The user authentication method for the console.
        - name: console-user
          default: admin
          type: string
          description: |
            The console username when using internal authentication.
        - name: console-password
          default: "[generated]"
          type: string
          description: |
            The console password when using internal authentication.
        - name: console-ingress
          default:
          type: string
          choices: [route, loadbalancer, nodeport, nginx-ingress-v1, contour-http-proxy, ingress, none]
          description: |
            Determines if/how console is exposed outside cluster. If
            not specified uses value of --ingress.
    - title: Service sync options
      entries:
        - name: enable-service-sync
          default: y
          type: boolean
          description: |
            Participate in cross-site service synchronization (default true)
        - name: service-sync-site-ttl
          default:
          type: duration
          description: |
            Time after which stale services, i.e. those whose site has not been heard from, created through service-sync are removed.

    - title: Config sync options
      entries:
        - name: config-sync-cpu
          default:
          type: string
          description: |
            CPU request for config-sync pods
        - name: config-sync-memory
          default:
          type: string
          description: |
            Memory request for config-sync pods
        - name: config-sync-cpu-limit
          default:
          type: string
          description: |
            CPU limit for config-sync pods
        - name: config-sync-memory-limit
          default:
          type: string
          description: |
            Memory limit for config-sync pods
    - title: Controller options
      entries:
        - name: controller-cpu
          default:
          type: string
          description: |
            CPU request for controller pods
        - name: controller-memory
          default:
          type: string
          description: |
            Memory request for controller pods
        - name: controller-cpu-limit
          default:
          type: string
          description: |
            CPU limit for controller pods
        - name: controller-memory-limit
          default:
          type: string
          description: |
            Memory limit for controller pods
        - name: controller-node-selector
          default:
          type: string
          description: |
            Node selector to control placement of controller pods
        - name: controller-pod-affinity
          default:
          type: string
          description: |
            Pod affinity label matches to control placement of controller pods
        - name: controller-pod-antiaffinity
          default:
          type: string
          description: |
            Pod antiaffinity label matches to control placement of controller pods
        - name: controller-ingress-host
          default:
          type: string
          description: |
            Host through which node is accessible when using nodeport as ingress.
        - name: controller-load-balancer-ip
          default:
          type: string
          description: |
            Load balancer ip that will be used for controller service, if supported by cloud provider
            - name: controller-service-annotation
              default:
                  type: strings
              description: |
                Annotations to add to skupper controller service
    - title: Flow collector options
      entries:
        - name: enable-flow-collector
          default:
          type: boolean
          description: |
            Enable cross-site flow collection for the application network
        - name: flow-collector-record-ttl
          default:
          type: duration
          description: |
            Time after which terminated flow records are deleted, i.e. those flow records that have an end time set. Default is 30 minutes.
        - name: flow-collector-cpu
          default:
          type: string
          description: |
            CPU request for flow collector pods
        - name: flow-collector-memory
          default:
          type: string
          description: |
            Memory request for flow collector pods
        - name: flow-collector-cpu-limit
          default:
          type: string
          description: |
            CPU limit for flow collector pods
        - name: flow-collector-memory-limit
          default:
          type: string
          description: |
            Memory limit for flow collector pods
    - title: Router options
      entries:
        - name: router-mode
          default: interior
          type: string
          choices: [interior, edge]
          description: |
            The role of the router in the router topology.  Interior
            routers do XXX.  Edge routers only do YYY.
        - name: router-logging
          default: info
          type: string
          choices: [trace, debug, info, notice, warning, error]
          description: |
            Logging settings for router
        - name: router-debug-mode
          default:
          type: string
          choices: [asan, gdb]
          description: |
            Enable debug mode for the router
        - name: routers
          default:
          type: integer
          description: |
            Number of router replicas to start
        - name: router-cpu
          default:
          type: string
          description: |
            CPU request for router pods
        - name: router-memory
          default:
          type: string
          description: |
            Memory request for router pods
        - name: router-cpu-limit
          default:
          type: string
          description: |
            CPU limit for router pods
        - name: router-memory-limit
          default:
          type: string
          description: |
            Memory limit for router pods
        - name: router-node-selector
          default:
          type: string
          description: |
            Node selector to control placement of router pods
        - name: router-pod-affinity
          default:
          type: string
          description: |
            Pod affinity label matches to control placement of router pods
        - name: router-pod-antiaffinity
          default:
          type: string
          description: |
            Pod antiaffinity label matches to control placement of router pods
        - name: router-ingress-host
          default:
          type: string
          description: |
            Host through which node is accessible when using nodeport as ingress.
        - name: router-load-balancer-ip
          default:
          type: string
          description: |
            Load balancer ip that will be used for router service, if supported by cloud provider
        - name: router-service-annotations
          default:
          type: strings
          description: |
            Annotations to add to skupper router service
- name: token
  entries:
    - name: expiry
      default:
      type: duration
      description: |
        Expiration time for claim (only valid if --token-type=claim) (default 15m0s)
    - name: name
      default:
      type: string
      description: |
        Provide a specific identity as which connecting skupper installation will be authenticated (default "skupper")
    - name: uses
      default:
      type: integer
      description: |
        Number of uses for which claim will be valid (only valid if --token-type=claim) (default 1)
- name: link
  entries:
    - name: cost
      default: 1
      type: integer
      description: |
        Specify a cost for this link.
    - name: name
      default: "[Generated]"
      type: string
      description: |
        Provide a specific name for the link (used when deleting it)
- name: required-service
  entries:
    - name: aggregate
      default:
      type: string
      description: |
        The aggregation strategy to use. One of 'json' or 'multipart'. If specified requests to this service will be sent to all registered implementations and the responses aggregated.
    - name: bridge-image
      default:
      type: string
      description: |
        The image to use for a bridge running external to the skupper router
    - name: enable-ingress
      default:
      type: string
      description: |
        Determines whether access to the Skupper service is enabled in this site. Valid values are Always (default) or Never.
    - name: event-channel
      default:
      type: boolean
      description: |
        If specified, this service will be a channel for multicast events.
    - name: generate-tls-secrets
      default:
      type: boolean
      description: |
        If specified, the service communication will be encrypted using TLS
    - name: protocol
      default: tcp
      type: string
      choices: [tcp, http, http2]
      description: |
        The protocol mapping in use for this service address.
    - name: tls-cert
      default:
      type: string
      description: |
        The Kubernetes secret name with custom certificates to encrypt
        the communication using TLS.
- name: provided-service
  entries:
    - name: target-port
      default:
      type: strings
      description: |
        The port the target is listening on (you can also use colon to map source-port to a target-port).
    - name: tls-trust
      default:
      type: string
      description: |
        The Kubernetes secret name with the CA to expose the service
        over TLS.
    - name: publish-not-ready-addresses
      default: n
      type: boolean
      description: |
        If specified, skupper will not wait for pods to be ready
