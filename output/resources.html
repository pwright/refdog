<!DOCTYPE html>
<html>
  <head>
    <title>Skupper resources</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="main.css" type="text/css"/>
    <link rel="icon" href="data:,"/>
    <script type="text/javascript" src="main.js" defer="defer"></script>



  </head>

<body>
  <header>
    <div>

<nav id="-path-nav"><a href="/index.html">Refdog</a><a href="/resources.html">Skupper resources</a></nav>

    </div>
  </header>
  <article>
    <div>

<h1 id="skupper-resources">Skupper resources</h1>
<h4 id="contents">Contents</h4>
<ul>
<li><a href="#site-configuration">Site configuration</a><ul>
<li><a href="#site">Site</a></li>
</ul>
</li>
<li><a href="#site-linking">Site linking</a><ul>
<li><a href="#grant">Grant</a></li>
<li><a href="#claim">Claim</a></li>
</ul>
</li>
<li><a href="#service-exposure">Service exposure</a><ul>
<li><a href="#connector">Connector</a></li>
<li><a href="#listener">Listener</a></li>
</ul>
</li>
<li><a href="#advanced-stuff">Advanced stuff</a><ul>
<li><a href="#link">Link</a></li>
<li><a href="#linkaccess">LinkAccess</a></li>
</ul>
</li>
<li><a href="#internal-stuff">Internal stuff</a><ul>
<li><a href="#securedaccess">SecuredAccess</a></li>
<li><a href="#certificate">Certificate</a></li>
</ul>
</li>
</ul>
<h2 id="site-configuration">Site configuration</h2>
<h3 id="site">Site</h3>
<p>A <a href="concepts.html#site">site</a> is a place where components of your application are
running.  Sites are linked to form application
<a href="concepts.html#network">networks</a>.</p>
<p>There can be only one site definition per namespace.</p>
<h4 id="examples">Examples</h4>
<p>A minimal site definition</p>
<pre><code class="language-yaml">apiVersion: skupper.io/v1alpha1
kind: Site
metadata:
  name: east
  namespace: hello-world-east
</code></pre>
<h4 id="spec-properties">Spec properties</h4>
<ul>
<li><p><strong>enableLinkAccess</strong> <em>boolean</em></p>
<p><em>Default:</em> false</p>
<p>Enable external access for links from remote sites.</p>
</li>
<li><p><strong>linkAccessType</strong> <em>string</em></p>
<p><em>Default:</em> <code>route</code> if the environment is OpenShift, otherwise
<code>loadbalancer</code></p>
<p>Select the means of opening external access.</p>
</li>
<li><p><strong>linkAccessHost</strong> <em>string</em></p>
<p>The host or IP address at which to expose link access.</p>
</li>
<li><p><strong>serviceAccount</strong> <em>string</em></p>
</li>
<li><p><strong>settings</strong> <em>array</em></p>
</li>
</ul>
<h2 id="site-linking">Site linking</h2>
<h3 id="grant">Grant</h3>
<p>An offer to accept links to the local site.  A remote site
can use a claim containing the grant URL and secret to
obtain a certificate signed by the grant's certificate
authority (CA), within a certain expiration period and for a
limited number of claims.</p>
<h4 id="spec-properties">Spec properties</h4>
<ul>
<li><p><strong>claims</strong> <em>integer</em></p>
<p><em>Consider maxClaims, claimsAllowed, and maxClaimsAllowed</em></p>
</li>
<li><p><strong>validFor</strong> <em>string (duration)</em></p>
<p><em>Look for what would be conventional for this.</em>
<em>&quot;validFor&quot; doesn't necessarily make it clear that it's</em>
<em>about time: &quot;valid for 3 uses&quot;.</em></p>
</li>
<li><p><strong>secret</strong> <em>string</em></p>
</li>
</ul>
<h3 id="claim">Claim</h3>
<p>A verifiable assertion of permission to link to a remote
site.  A claim contains the URL and secret of a previous
grant.</p>
<h4 id="spec-properties">Spec properties</h4>
<ul>
<li><p><strong>url</strong> <em>string</em></p>
</li>
<li><p><strong>secret</strong> <em>string</em></p>
</li>
<li><p><strong>ca</strong> <em>string</em></p>
</li>
</ul>
<h2 id="service-exposure">Service exposure</h2>
<h3 id="connector">Connector</h3>
<p>A <a href="concepts.html#connector">connector</a> binds local servers to listeners in
remote sites.</p>
<p>Each site can have multiple connector definitions.</p>
<h4 id="examples">Examples</h4>
<p>A connector in site East for the Hello World backend service</p>
<pre><code class="language-yaml">apiVersion: skupper.io/v1alpha1
kind: Connector
metadata:
  name: backend
  namespace: hello-world-east
spec:
  routingKey: backend
  port: 8080
  selector: app=backend
</code></pre>
<h4 id="spec-properties">Spec properties</h4>
<ul>
<li><p><strong>routingKey</strong> <em>string</em></p>
<p>The identifier used to route traffic from listeners to
connectors.  To connect to a service at a remote site, the
listener and connector must have matching routing keys.</p>
</li>
<li><p><strong>selector</strong> <em>string</em></p>
<p>A Kubernetes <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#label-selectors">label selector</a> for targeting server
pods.</p>
</li>
<li><p><strong>host</strong> <em>string</em></p>
<p>The hostname or IP address of the server.  This is an
alternative to <code>selector</code> for specifying the target
server.</p>
</li>
<li><p><strong>port</strong> <em>integer</em></p>
<p>The port number of the server listener.</p>
</li>
<li><p><strong>enableTLS</strong> <em>boolean</em></p>
<p><em>Default:</em> false</p>
<p>Use TLS to encrypt communication between the router and servers.</p>
<p>By default, the TLS credentials are generated and stored in
a secret at XXX.</p>
</li>
<li><p><strong>tlsCredentials</strong> <em>string</em></p>
<p>The name of a Kubernetes secret containing the trusted
server certificate (typically a CA).</p>
<p>It can optionally include a client certificate and key for
mutual TLS.</p>
</li>
<li><p><strong>type</strong> <em>string</em></p>
<p><em>What is this again?  I think we need a qualifier on &quot;type&quot;.</em></p>
</li>
<li><p><strong>includeNotReady</strong> <em>boolean</em></p>
<p><em>Default:</em> false</p>
</li>
</ul>
<h3 id="listener">Listener</h3>
<p>A <a href="concepts.html#listener">listener</a> is a local connection endpoint bound to
servers in remote sites.</p>
<p>Each site can have multiple listener definitions.</p>
<h4 id="examples">Examples</h4>
<p>A listener in site West for the Hello World backend service
in site East</p>
<pre><code class="language-yaml">apiVersion: skupper.io/v1alpha1
kind: Listener
metadata:
  name: backend
  namespace: hello-world-west
spec:
  routingKey: backend
  port: 8080
  host: backend
</code></pre>
<h4 id="spec-properties">Spec properties</h4>
<ul>
<li><p><strong>routingKey</strong> <em>string</em></p>
<p>The identifier used to route traffic from listeners to
connectors.  To connect to a service at a remote site, the
listener and connector must have matching routing keys.</p>
</li>
<li><p><strong>host</strong> <em>string</em></p>
<p>The hostname or IP address of the local listener.  Clients
at this site use the listener host and port to
establish connections to the remote service.</p>
</li>
<li><p><strong>port</strong> <em>integer</em></p>
<p>The port of the local listener.  Clients at this site use
the listener host and port to establish connections to
the remote service.</p>
</li>
<li><p><strong>enableTLS</strong> <em>boolean</em></p>
<p><em>Default:</em> false</p>
<p>Use TLS to encrypt communication between clients and the router.</p>
<p>By default, the TLS credentials are generated and stored in
a secret at XXX.</p>
</li>
<li><p><strong>tlsCredentials</strong> <em>string</em></p>
<p>The name of a Kubernetes secret containing TLS
credentials.  The secret contains the trusted server
certificate (typically a CA).</p>
<p>It can optionally include a client certificate and key for
mutual TLS.</p>
</li>
<li><p><strong>tlsCA</strong> <em>string</em></p>
<p><em>Doesn't this follow, if the TLS credentials can be generated?</em></p>
</li>
<li><p><strong>type</strong> <em>string</em></p>
<p><em>What is this again?  I think we need a qualifier on &quot;type&quot;.</em></p>
</li>
</ul>
<h2 id="advanced-stuff">Advanced stuff</h2>
<h3 id="link">Link</h3>
<p>A <a href="concepts.html#link">link</a> is a site-to-site communication channel. Links
serve as a transport for application connections and requests.</p>
<h4 id="examples">Examples</h4>
<p>A typical link definition</p>
<pre><code class="language-yaml">apiVersion: skupper.io/v1alpha1
kind: Link
metadata:
  name: link-to-west
  namespace: hello-world-east
spec:
  [...]
</code></pre>
<h4 id="spec-properties">Spec properties</h4>
<ul>
<li><p><strong>tlsCredentials</strong> <em>string</em></p>
<p>The name of a Kubernetes secret containing TLS
credentials. The secret contains the trusted server
certificate (typically a CA).</p>
<p>It can optionally include a client certificate and key for
mutual TLS.</p>
</li>
<li><p><strong>cost</strong> <em>integer</em></p>
</li>
<li><p><strong>interRouter</strong> <em>object</em></p>
</li>
<li><p><strong>edge</strong> <em>object</em></p>
</li>
<li><p><strong>noClientAuth</strong> <em>boolean</em></p>
<p><em>Default:</em> false</p>
</li>
</ul>
<h3 id="linkaccess">LinkAccess</h3>
<p>A point of external access for links from remote sites.  A
LinkAccess configures the router to accept inter-router
links and creates the Kubernetes resources for external
access.</p>
<h4 id="examples">Examples</h4>
<p>A typical link access definition</p>
<pre><code class="language-yaml">apiVersion: skupper.io/v1alpha1
kind: LinkAccess
metadata:
  name: skupper-router
spec:
  roles:
  - role: inter-router
    port: 55671
  - role: edge
    port: 45671
  tlsCredentials: skupper-site-server
</code></pre>
<h4 id="spec-properties">Spec properties</h4>
<ul>
<li><p><strong>roles</strong> <em>array</em></p>
</li>
<li><p><strong>tlsCredentials</strong> <em>string</em></p>
<p>The name of a Kubernetes secret containing the trusted
server certificate (typically a CA).</p>
<p>It can optionally include a client certificate and key for
mutual TLS.</p>
</li>
<li><p><strong>ca</strong> <em>string</em></p>
<p>The name of a Kubernetes secret containing a CA for
generating TLS credentials.  If the <code>tlsCredentials</code>
property is not set, the controller uses <code>ca</code> to
generate them.</p>
<p><em>Consider tlsCA.  And &quot;ca&quot; often means &quot;this is what I trust&quot;.  This thing has a different meaning.</em></p>
</li>
<li><p><strong>bindHost</strong> <em>string</em></p>
<p><em>Just host?  What does &quot;bind&quot; do here to clarify?  I have a related attribute on site: linkAccessHost.</em></p>
</li>
<li><p><strong>subjectAlternativeNames</strong> <em>array</em></p>
</li>
<li><p><strong>options</strong> <em>object</em></p>
</li>
</ul>
<h2 id="internal-stuff">Internal stuff</h2>
<h3 id="securedaccess">SecuredAccess</h3>
<p>A generic resource for exposing a workload by creating the
necessary service and ingress resources and optionally
generating TLS credentials.</p>
<h4 id="spec-properties">Spec properties</h4>
<ul>
<li><p><strong>ports</strong> <em>array</em></p>
</li>
<li><p><strong>selector</strong> <em>object</em></p>
</li>
<li><p><strong>ca</strong> <em>string</em></p>
</li>
<li><p><strong>certificate</strong> <em>string</em></p>
</li>
<li><p><strong>accessType</strong> <em>string</em></p>
</li>
<li><p><strong>options</strong> <em>object</em></p>
</li>
</ul>
<h3 id="certificate">Certificate</h3>
<h4 id="spec-properties">Spec properties</h4>
<ul>
<li><p><strong>ca</strong> <em>string</em></p>
</li>
<li><p><strong>subject</strong> <em>string</em></p>
</li>
<li><p><strong>hosts</strong> <em>array</em></p>
</li>
<li><p><strong>client</strong> <em>boolean</em></p>
<p><em>Default:</em> false</p>
</li>
<li><p><strong>server</strong> <em>boolean</em></p>
<p><em>Default:</em> false</p>
</li>
<li><p><strong>signing</strong> <em>boolean</em></p>
<p><em>Default:</em> false</p>
</li>
</ul>


    </div>
  </article>
  <footer>
    <div>
    </div>
  </footer>
</body>


</html>
