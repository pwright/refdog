groups:
  - title: Site configuration
    commands:
      - title: skupper site
        description: |
          Print help for site commands.
      - title: skupper site create
        description: |
          Create a site.
        examples: |
          # Create a site
          skupper site create

          # Create a site that can accept links from remote sites
          skupper site create --create-default-link-access
        usage: skupper site create [OPTIONS]
        output: |
          Waiting for status...
          Site "<name>" is ready
        options:
          - name: --name
            default: "[generated]"
            description: |
              Set the site name.  The default is the site namespace
              name.
          - name: --create-default-link-access
            default: false
            description: |
              Enable external access for links from remote sites.
            notes: |
              I've come to think we should name this
              --enable-link-access.
          - name: --link-access-type
            default: "[platform-dependent]"
            description: |
              Select the means of opening external access.

              The default is `route` on OpenShift and `loadbalancer`
              otherwise.
        errors:
          - message: Site resource already exists
            description: |
              There is already a site resource defined for the namespace.
        notes: |
          I think it may make sense for the site CR to always have the
          name "site", since it is a singleton, and have the name
          option be a distinct "name override" field.
      - title: skupper site update
        examples: |
          # Change the site name
          skupper site update --name headquarters

          # Update multiple settings
          skupper site update --name warehouse --create-default-link-access
        usage: skupper site update [OPTIONS]
        description: |
          Change site settings.

          `skupper site update` has the same options as `skupper site
          create`, except for those options that cannot be changed
          after site creation.
        output: |
          Waiting for update to complete...
          Site "<name>" is updated
        errors:
          - message: No site resource exists
            description: |
              There is no existing Skupper site resource to update.
      - title: skupper site delete
        description: |
          Delete a site.
        usage: skupper site delete
        output: |
          Waiting for deletion to complete...
          Site "<name>" is deleted
        errors:
          - message: No site resource exists
            description: |
              There is no existing Skupper site resource to delete.
      - title: skupper site status
        description: |
          Show the current status of a site.
        usage: skupper site status
        output: |
          Status:        Active
          Name:          west
          Linked sites:  1
  - title: Site linking
    commands:
      - title: skupper token
        description: |
          Print help for token commands.  Currently there is just one.
      - title: skupper token create
        description: |
          Create a token.
        usage: skupper token create TOKEN-FILE
        output: |
          Token file created at <file>
          The token expires after 1 use or after 15 minutes
      - title: skupper link
        description: |
          Print help for link commands.
      - title: skupper link create
        description: |
          Create a link.
        usage: skupper link create TOKEN-FILE
      - title: skupper link delete
        usage: skupper link delete LINK-NAME
      - title: skupper link status
        output: |
          NAME   STATUS
          link1  Active

          Links from remote sites:
          east
  - title: Service exposure
    commands:
      - title: skupper connector
        description: |
          Print help for connector commands.
      - title: skupper connector create
        description: |
          Create a connector.
        usage: skupper connector create CONNECTOR-NAME [OPTIONS]
        output: |
          Waiting for status...
          Connector "<name>" is ready
      - title: skupper connector delete
        description: |
          Delete a connector.
        usage: skupper connector delete CONNECTOR-NAME
        output: |
          Waiting for deletion to complete...
          Connector "<name>" is deleted
      - title: skupper connector status
        description: |
          Show the status of connectors in the current site.
        usage: skupper connector status
        output: |
          NAME      ROUTING-KEY   SELECTOR      PORT   LISTENERS
          backend   backend       app=backend   8080   1
      - title: skupper listener
        description: |
          Print help for listener commands.
      - title: skupper listener create
        description: |
          Create a listener.
        usage: skupper listener create LISTENER-NAME [OPTIONS]
        output: |
          Waiting for status...
          Connector "<name>" is ready
      - title: skupper listener delete
        description: |
          Delete a listener.
        usage: skupper listener delete LISTENER-NAME
        output: |
          Waiting for deletion to complete...
          Listener "<name>" is deleted
      - title: skupper listener status
        description: |
          Show the status of listeners in the current site.
        usage: skupper listener status
        output: |
          NAME      ROUTING-KEY   HOST      PORT   CONNECTORS
          backend   backend       backend   8080   1
  # - title: Platform operations
  #   commands:
  #     - title: skupper platform
  #       description: |
  #         Print help for platform commands.
  #     - title: skupper platform install
  #     - title: skupper platform uninstall
  #     - title: skupper platform switch
  - title: Debug operations
    commands:
      - title: skupper debug
        description: |
          Print help for debug commands.
      - title: skupper debug dump
        description: |
          Generate a debug dump file.
        usage: skupper debug dump [FILE-NAME]
        output: |
          Debug dump file generated at <file>
  - title: Other operations
    commands:
      # - title: skupper network status
      - title: skupper version
